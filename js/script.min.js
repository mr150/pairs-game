import{Card}from"./card.min.js";const gameSize=4;let pairsLeft=0;const gameElm=document.getElementById("game"),againElm=document.getElementById("btn-again"),curPair=[];function shuffle(a){for(let e=a.length-1;0<e;e--){var r=Math.floor(Math.random()*(e+1));[a[e],a[r]]=[a[r],a[e]]}return a}function resetGame(e){void 0!==e&&(e.target.hidden=!0),gameElm.innerHTML="",curPair.length=0,pairsLeft=gameSize*gameSize;const a=new Set,r=2*gameSize;for(;a.size<r;)a.add(Math.floor(10*Math.random())%r+1);const t=Array.from(a);shuffle(t.concat(t)).forEach(e=>{const a=document.createElement("game-card");a.number=e,gameElm.append(a)})}function openCard(e){const a=e["target"];e.currentTarget===a||!pairsLeft||"click"!==e.type&&("keyup"!==e.type||"Enter"!==e.code&&"Space"!==e.code)||a.opened||(2===curPair.length&&(curPair[0].number!==curPair[1].number&&(curPair.forEach(e=>e.close()),pairsLeft+=2),curPair.length=0),a.open(),curPair.push(a),pairsLeft--),0===pairsLeft&&(againElm.hidden=!1)}customElements.define("game-card",Card),gameElm.addEventListener("click",openCard),gameElm.addEventListener("keyup",openCard,!0),againElm.addEventListener("click",resetGame),resetGame();
